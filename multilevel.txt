#include <stdio.h>

int main() {
    int i, n1, n2, tq, total = 0;
    float avg_wait = 0, avg_tat = 0;

    printf("Enter number of processes in High Priority Queue (Round Robin): ");
    scanf("%d", &n1);
    printf("Enter number of processes in Low Priority Queue (FCFS): ");
    scanf("%d", &n2);

    int bt1[n1], bt2[n2], wt1[n1], tat1[n1], wt2[n2], tat2[n2];
    int rt1[n1]; // remaining times for RR
    int time = 0;

    // Input for High Priority Queue
    printf("\n--- High Priority Queue (Round Robin) ---\n");
    for (i = 0; i < n1; i++) {
        printf("Enter burst time for P%d: ", i + 1);
        scanf("%d", &bt1[i]);
        rt1[i] = bt1[i];
    }
    printf("Enter time quantum for Round Robin: ");
    scanf("%d", &tq);

    // Input for Low Priority Queue
    printf("\n--- Low Priority Queue (FCFS) ---\n");
    for (i = 0; i < n2; i++) {
        printf("Enter burst time for Q%d: ", i + 1);
        scanf("%d", &bt2[i]);
    }

    // ----- Process High Priority Queue (RR) -----
    int remaining = n1;
    while (remaining != 0) {
        for (i = 0; i < n1; i++) {
            if (rt1[i] > 0) {
                if (rt1[i] > tq) {
                    time += tq;
                    rt1[i] -= tq;
                } else {
                    time += rt1[i];
                    wt1[i] = time - bt1[i];
                    rt1[i] = 0;
                    remaining--;
                }
            }
        }
    }

    // Calculate Turnaround Times for RR
    for (i = 0; i < n1; i++) {
        tat1[i] = bt1[i] + wt1[i];
    }

    // ----- Process Low Priority Queue (FCFS) -----
    // Start after high-priority queue finishes
    int start_time = time;
    wt2[0] = start_time;

    for (i = 1; i < n2; i++) {
        wt2[i] = wt2[i - 1] + bt2[i - 1];
    }

    // Calculate turnaround times for FCFS
    for (i = 0; i < n2; i++) {
        tat2[i] = bt2[i] + wt2[i];
    }

    // ----- Display Results -----
    printf("\n--- High Priority Queue (Round Robin) ---\n");
    printf("Process\tBurst Time\tWaiting Time\tTurnaround Time\n");
    for (i = 0; i < n1; i++) {
        printf("P%d\t\t%d\t\t%d\t\t%d\n", i + 1, bt1[i], wt1[i], tat1[i]);
        avg_wait += wt1[i];
        avg_tat += tat1[i];
    }

    printf("\n--- Low Priority Queue (FCFS) ---\n");
    printf("Process\tBurst Time\tWaiting Time\tTurnaround Time\n");
    for (i = 0; i < n2; i++) {
        printf("Q%d\t\t%d\t\t%d\t\t%d\n", i + 1, bt2[i], wt2[i], tat2[i]);
        avg_wait += wt2[i];
        avg_tat += tat2[i];
    }

    total = n1 + n2;
    avg_wait /= total;
    avg_tat /= total;

    printf("\nOverall Average Waiting Time: %.2f", avg_wait);
    printf("\nOverall Average Turnaround Time: %.2f\n", avg_tat);

    printf("\nExecution Order:\n");
    printf("High Priority Queue → Round Robin → then Low Priority Queue (FCFS)\n");

    return 0;
}
